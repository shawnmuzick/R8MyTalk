<!DOCTYPE html>
<html class="black-placeholder" lang="en">
  <head>
    <%- include('partials/meta',{pageTitle:'Dashboard'})%>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN"
      crossorigin="anonymous"
    />
    <%- include('partials/styles') %>
    <style>
      .addMargin {
        margin-top: 1em;
      }
    </style>
  </head>

  <body class="is-preload">
    <div id="page-wrapper">
      <%- include('partials/navbar') %>

      <!-- Main -->
      <div id="main" class="wrapper style1">
        <div class="container">
          <header class="major">
            <h2>Hi, <%= user.displayName %></h2>
          </header>

          <!-- Content -->
          <section id="content">
            <!-- This will load the eventInfo modal -->
            <div class="table-container">
              <div class="d-flex align-items-center justify-content-center mb-1">
                <button
                  type="submit"
                  class="button primary moveButtonRight"
                  data-bs-toggle="modal"
                  data-bs-target="#exampleModal"
                  data-bs-whatever="@getbootstrap"
                >
                  Create Event
                </button>
                <form action="/goToTestSurveyButton" method="post">
                  <button
                    name="goToTestSurveyButton"
                    class="button primary"
                    id="testSurvey"
                    data-bs-toggle="modal"
                    data-bs-target="#survey"
                    data-bs-whatever="@survey"
                    style="margin-top: 35px; padding-left: 40px; padding-right: 40px"
                  >
                    Test Survey
                  </button>
                </form>
              </div>
            </div>

            <br />
            <br />

            <div
              class="modal fade"
              id="exampleModal"
              tabindex="-1"
              aria-labelledby="exampleModalLabel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header addMargin">
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>
                  <div class="modal-body"><%- include('forms/createEventForm') %></div>
                </div>
              </div>
            </div>

            <!--Edit Question Modal-->
            <div
              class="modal fade"
              id="editQuestionModel"
              tabindex="-1"
              aria-labelledby="editQuestionModel"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header addMargin">
                    <button
                      type="button"
                      class="btn-close"
                      data-bs-dismiss="modal"
                      aria-label="Close"
                    ></button>
                  </div>
                  <div class="modal-body"><%- include('forms/editQuestionForm') %></div>
                </div>
              </div>
            </div>

            <!--Upload File Modal-->
            <div
              class="modal fade"
              id="uploadFileModal"
              tabindex="-1"
              aria-labelledby="uploadFileModal"
              aria-hidden="true"
            >
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-body"><%- include('forms/fileUploadForm') %></div>
                </div>
              </div>
            </div>

            <div class="table-wrapper">
              <%- include('partials/userEventsTable',{eventArray:eventArray}) %>
            </div>
          </section>
        </div>
      </div>

      <%- include('partials/footer') %>
    </div>

    <%- include('partials/scripts') %>

    <script src="/assets/js/profilePageHandler.js"></script>
    <!--^^^ viewing qr and go to Survey button-->
    <script>
      function formatCurrency(input) {
        // Get the input value without non-numeric characters
        let numericValue = input.value.replace(/[^0-9]/g, "");

        // Format the numeric value with a dollar sign
        let formattedValue = "$" + numericValue;

        // Update the input value with the formatted value
        input.value = formattedValue;
      }
    </script>
  </body>
</html>
